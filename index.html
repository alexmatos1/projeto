<!DOCTYPE html>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml">

<style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
        overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
        font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-0lax{text-align:left;vertical-align:top}
</style>

<head>
    <meta charset="UTF-8">
    <title>Atividade-2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>


</head>
<body>
<div class="container" style="margin-top: 20px">

    <h2 style="text-align: center">Formulário</h2>
    <hr style="border-color: blue">

<div class="row" style="width: 98%; margin: auto; margin-bottom: 25px">
    <div class="col-4">
        <label for="nome">Nome</label>
        <input type="text" class="form-control" id="nome" > <!--  placeholder="Seu nome">-->
    </div>
    <div class="col-4">
        <label for="cpf">CPF</label>
        <input type="text" class="form-control" id="cpf" onkeypress="$(this).mask('###.###.###-##', {reverse: false});" maxlength="14">
        <span id="resposta"></span>
    </div>
    <div class="col-4">
        <label for="email">E-mail</label>
        <input type="email" class="form-control" id="email"aria-describedby="emailHelp" onblur="validacaoEmail(email)">
        <span id="msgemail"></span>
    </div>
</div>

<div class="row" style="width: 98%; margin: auto; margin-bottom: 25px">
    <div class="col-4">
        <label for="telefone">Telefone</label>
        <input type="text" class="form-control" id="telefone" aria-describedby="emailHelp" onkeypress="$(this).mask('(##) #####-####', {reverse: false});" maxlength="15">
    </div>
    <div class="col-4">
        <label >Habilitação</label>
        </br>
        <div class="form-check-inline">
            <label class="form-check-label">
                <input type="radio" class="form-check-input" id="sim" name="optradio" value="1" onclick="exibir()">Sim
            </label>
        </div>
        <div class="form-check-inline">
            <label class="form-check-label">
                <input type="radio" class="form-check-input" id="nao" name="optradio" value="0" onclick="exibir()">Não
            </label>
        </div>
    </div>
    <div class="col-4" id="cate" style="display: none">
        <label for="categoria">Categoria</label>
        <input type="text" class="form-control" id="categoria" >
    </div>
</div>

<div class="row" style="width: 98%; margin: auto; margin-bottom: 25px">
    <div class="col-4">
        <div class="form-group">
            <label for="lingua">Língua Estrangeira</label>
            <select class="form-control" id="lingua">
                <option></option>
                <option>Inglês</option>
                <option>Espanhol</option>
                <option>Francês</option>
            </select>
        </div>
    </div>
    <div class="col-4">
        <label for="estado">Estado</label>
        <select class="form-control" id="estado">
            <option></option>
            <option value=""></option>
        </select>
    </div>
    <div class="col-4">
        <label for="cidade">Cidade</label>
        <select class="form-control" id="cidade">

        </select>
    </div>
</div>


<div class="row" style="width: 98%; margin: auto; margin-bottom: 25px">
    <div class="col-4">
        <label for="cep">CEP</label>
        <input type="text" class="form-control" id="cep" >
    </div>
    <div class="col-4">
        <label for="logradouro">Logradouro</label>
        <input type="text" class="form-control" id="logradouro" >
    </div>
    <div class="col-4">
        <label for="numero">Número</label>
        <input type="text" class="form-control" id="numero" >
    </div>
</div>

<div class="row" style="width: 98%; margin: auto; margin-bottom: 25px">
    <div class="col-4">
        <label for="complemento">Complemento</label>
        <input type="text" class="form-control" id="complemento" >
    </div>
    <div class="col-4">
        <div class="form-group">
            <label for="lingua">Cargo</label>
            <select class="form-control" id="cargo">
                <option></option>
                <option>Analista</option>
                <option>Desenvolvedor web</option>
                <option>Diretor</option>
                <option>Técnico de Informática</option>
                <option>Técnico de Segurança do trabalho</option>
            </select>
        </div>
    </div>
    <div class="col-4">
        <label for="salario">salário proposto</label>
        <input type="text" class="form-control" id="salario"  onkeypress="$(this).mask('##.##0,00', {reverse: true});" maxlength="9">
    </div>
</div>
</div>





<div class="container">

    <h2 style="text-align: center">Tabela Horários</h2>
    <hr style="border-color: blue">

    <p style="text-align: center">Adicione os horários na tabela abaixo:</p>

<table class="tg" style="table-layout: fixed; width: 499px; margin: auto; padding-top: 20px; margin-bottom: 30px">
    <colgroup>
        <col style="width: 126px">
        <col style="width: 90px">
        <col style="width: 89px">
        <col style="width: 105px">
        <col style="width: 89px">
    </colgroup>
    <thead>
    <tr>
        <th class="tg-0lax">Dias da semana</th>
        <th class="tg-0lax">Hora Início</th>
        <th class="tg-0lax">Hora Fim</th>
        <th class="tg-0lax">Tempo de descanso (h)</th>
        <th class="tg-0lax">Carga horária</th>
    </tr>
    </thead>
    <tbody>
    <tr onchange="verificarHorario()">
        <td class="tg-0lax">Segunda</td>
        <td class="tg-0lax"><input type="text" class="form-control" id="seg_ini" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control" id="seg_fim" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="number" class="form-control" id="seg_des" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control"  id="seg_car" disabled></td>
    </tr>
    <tr onchange="verificarHorarioT()">
        <td class="tg-0lax" >Terça</td>
        <td class="tg-0lax"><input type="text" class="form-control" id="ter_ini" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control" id="ter_fim" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="number" class="form-control" id="ter_des" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control"   id="ter_car" disabled></td>
    </tr>
    <tr onchange="verificarHorarioQua()">
        <td class="tg-0lax">Quarta</td>
        <td class="tg-0lax"><input type="text" class="form-control" id="qua_ini" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control" id="qua_fim" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="number" class="form-control" id="qua_des" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control"  id="qua_car" disabled></td>
    </tr>
    <tr onchange="verificarHorarioQuin()">
        <td class="tg-0lax">Quinta</td>
        <td class="tg-0lax"><input type="text" class="form-control" id="qui_ini" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control" id="qui_fim" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="number" class="form-control" id="qui_des" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control"  id="qui_car" disabled></td>
    </tr>
    <tr onchange="verificarHorarioSex()">
        <td class="tg-0lax">Sexta</td>
        <td class="tg-0lax"><input type="text" class="form-control" id="sex_ini" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="text" class="form-control" id="sex_fim" onkeypress="$(this).mask('##:##');" maxlength="5"></td>
        <td class="tg-0lax"><input type="number" class="form-control" id="sex_des" maxlength="5"></td>
        <td class="tg-0lax" ><input type="text" class="form-control"  id="sex_car" disabled></td>
    </tr>
    <tr>
        <td class="tg-0lax" colspan="4">Carga horária semanal</td>
        <td class="tg-0lax"><input type="text" class="form-control"  id="total" disabled></td>
    </tr>
    </tbody>
</table>
</div>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.0.0.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.maskedinput/1.4.1/jquery.maskedinput.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script> <!--formatar moeda-->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.4.0/moment.min.js"></script>

</body>
</html>


<script>

    //função para Exibir/ocultar campo categoria
    function exibir(){
        var positivo = document.getElementById('sim');
        var negativo = document.getElementById('nao');
        var cate = document.getElementById('cate');

        if(positivo.checked){
            cate.style.display = 'block';
        }

        else if(negativo.checked){
            cate.style.display = 'none';
        }
    }


    //função para buscar por CEP
        $(document).ready(function() {
        $("#cep").mask("99999-999",{completed:function(){
                var cep = $(this).val().replace(/[^0-9]/, "");

                // Validação do CEP; caso o CEP não possua 8 números, então cancela
                // a consulta
                if(cep.length != 8){
                    return false;
                }

                // A url de pesquisa consiste no endereço do webservice + o cep que
                // o usuário informou + o tipo de retorno desejado (entre "json",
                // "jsonp", "xml", "piped" ou "querty")
                var url = "https://viacep.com.br/ws/"+cep+"/json/";

                $.getJSON(url, function(dadosRetorno){
                    try{
                        // Preenche os campos de acordo com o retorno da pesquisa
                        $("#logradouro").val(dadosRetorno.logradouro);
                        $("#numero").focus();
                    }catch(ex){}
                });
            }});

    });



    //função para Carregar cidade/estado
    $(document).ready(function () {

        $.getJSON('http://mendesepereira.neuroteks.com/entrevista/estados_cidades.json', function (data) {

            var items = [];
            var options = '<option value=""></option>';

            $.each(data, function (key, val) {
                options += '<option value="' + val.nome + '">' + val.nome + '</option>';
            });
            $("#estado").html(options);

            $("#estado").change(function () {

                var options_cidades = '';
                var str = "";

                $("#estado option:selected").each(function () {
                    str += $(this).text();
                });

                $.each(data, function (key, val) {
                    if(val.nome == str) {
                        $.each(val.cidades, function (key_city, val_city) {
                            options_cidades += '<option value="' + val_city + '">' + val_city + '</option>';
                        });
                    }
                });

                $("#cidade").html(options_cidades);

            }).change();

        });

    });



    //Validar CPF
   function CPF(){"user_strict";function r(r){for(var t=null,n=0;9>n;++n)t+=r.toString().charAt(n)*(10-n);var i=t%11;return i=2>i?0:11-i}function t(r){for(var t=null,n=0;10>n;++n)t+=r.toString().charAt(n)*(11-n);var i=t%11;return i=2>i?0:11-i}var n="CPF Inválido",i="CPF Válido";this.gera=function(){for(var n="",i=0;9>i;++i)n+=Math.floor(9*Math.random())+"";var o=r(n),a=n+"-"+o+t(n+""+o);return a},this.valida=function(o){for(var a=o.replace(/\D/g,""),u=a.substring(0,9),f=a.substring(9,11),v=0;10>v;v++)if(""+u+f==""+v+v+v+v+v+v+v+v+v+v+v)return n;var c=r(u),e=t(u+""+c);return f.toString()===c.toString()+e.toString()?i:n}}

    var CPF = new CPF();


    $("#cpf").keypress(function(){
        $("#resposta").html(CPF.valida($(this).val()));
    });

    $("#cpf").blur(function(){
        $("#resposta").html(CPF.valida($(this).val()));
    });


    //Validar E-mail
    function validacaoEmail(field) {
        usuario = field.value.substring(0, field.value.indexOf("@"));
        dominio = field.value.substring(field.value.indexOf("@")+ 1, field.value.length);

        if ((usuario.length >=1) &&
            (dominio.length >=3) &&
            (usuario.search("@")==-1) &&
            (dominio.search("@")==-1) &&
            (usuario.search(" ")==-1) &&
            (dominio.search(" ")==-1) &&
            (dominio.search(".")!=-1) &&
            (dominio.indexOf(".") >=1)&&
            (dominio.lastIndexOf(".") < dominio.length - 1)) {
            document.getElementById("msgemail").innerHTML="E-mail válido";
        }
        else{
            document.getElementById("msgemail").innerHTML="E-mail inválido";

        }
    }



    //-------------------------- segunda -------------------------------------------------------------------


    function verificarDiferencaHorario(inicialMin, finalMin, descanso) {
        var totalMin = Number(finalMin - inicialMin - descanso);

        var carga_segunda = document.getElementById("seg_car");

        if(inicialMin && finalMin > 0) {
            carga_segunda.value = Math.trunc(totalMin / 60).toString();
        }
        if(carga_segunda.value > 10 ){
            alert("Carga horária excedeu o limite diário de 10h");
        }


    }


    function verificarHorario() {
        var inicial_segunda = document.getElementById("seg_ini").value;
        var final_segunda = document.getElementById("seg_fim").value;
        var descanso_segunda = document.getElementById("seg_des").value;

        /*var inicial_terca = document.getElementById("ter_ini").value;
        var final_terca = document.getElementById("ter_fim").value;
        var descanso_terca = document.getElementById("ter_des").value;

        var inicial_quarta = document.getElementById("qua_ini").value;
        var final_quarta = document.getElementById("qua_fim").value;
        var descanso_quarta = document.getElementById("qua_des").value;

        var inicial_quinta = document.getElementById("qui_ini").value;
        var final_quinta = document.getElementById("qui_fim").value;
        var descanso_quinta = document.getElementById("qui_des").value;

        var inicial_sexta = document.getElementById("sex_ini").value;
        var final_sexta = document.getElementById("sex_fim").value;
        var descanso_sexta = document.getElementById("sex_des").value;*/

        var splInicial = inicial_segunda.split(":"), splFinal = final_segunda.split(":");

        var inicialMin = (Number(splInicial[0] * 60)) + Number(splInicial[1]);
        var finalMin = (Number(splFinal[0] * 60)) + Number(splFinal[1]);

        var descanso = Number(descanso_segunda * 60);

        verificarDiferencaHorario(inicialMin, finalMin, descanso);


    }


    //-------------------------- terça -------------------------------------------------------------------

    function verificarDiferencaHorarioT(inicialMin, finalMin, descanso) {
        var totalMin = Number(finalMin - inicialMin - descanso);

        var carga_terca = document.getElementById("ter_car");

        if(inicialMin && finalMin > 0) {
            carga_terca.value = Math.trunc(totalMin / 60).toString();
        }
        if(carga_terca.value > 10 ){
            alert("Carga horária excedeu o limite diário de 10h");
        }
    }



    function verificarHorarioT() {

        var inicial_terca = document.getElementById("ter_ini").value;
        var final_terca = document.getElementById("ter_fim").value;
        var descanso_terca = document.getElementById("ter_des").value;

        var splInicial = inicial_terca.split(":"), splFinal = final_terca.split(":");

        var inicialMin = (Number(splInicial[0] * 60)) + Number(splInicial[1]);
        var finalMin = (Number(splFinal[0] * 60)) + Number(splFinal[1]);

        var descanso = Number(descanso_terca * 60);

        verificarDiferencaHorarioT(inicialMin, finalMin, descanso);

    }

    //-------------------------- Quarta -------------------------------------------------------------------

    function verificarDiferencaHorarioQua(inicialMinqua, finalMinqua, descansoqua) {
        var totalMinqua = Number(finalMinqua - inicialMinqua - descansoqua);

        var carga_quarta = document.getElementById("qua_car");

        if(inicialMinqua && finalMinqua > 0) {
            carga_quarta.value = Math.trunc(totalMinqua / 60).toString();
        }
        if(carga_quarta.value > 10){
            alert("Carga horária excedeu o limite diário de 10h");
        }
    }


    function verificarHorarioQua() {
        var inicial_quarta = document.getElementById("qua_ini").value;
        var final_quarta = document.getElementById("qua_fim").value;
        var descanso_quarta = document.getElementById("qua_des").value;

        /*var inicial_terca = document.getElementById("ter_ini").value;
        var final_terca = document.getElementById("ter_fim").value;
        var descanso_terca = document.getElementById("ter_des").value;

        var inicial_quarta = document.getElementById("qua_ini").value;
        var final_quarta = document.getElementById("qua_fim").value;
        var descanso_quarta = document.getElementById("qua_des").value;

        var inicial_quinta = document.getElementById("qui_ini").value;
        var final_quinta = document.getElementById("qui_fim").value;
        var descanso_quinta = document.getElementById("qui_des").value;

        var inicial_sexta = document.getElementById("sex_ini").value;
        var final_sexta = document.getElementById("sex_fim").value;
        var descanso_sexta = document.getElementById("sex_des").value;*/

        var splInicial = inicial_quarta.split(":"), splFinal = final_quarta.split(":");

        var inicialMinqua = (Number(splInicial[0] * 60)) + Number(splInicial[1]);
        var finalMinqua = (Number(splFinal[0] * 60)) + Number(splFinal[1]);

        var descansoqua = Number(descanso_quarta * 60);

        verificarDiferencaHorarioQua(inicialMinqua, finalMinqua, descansoqua);


    }

    //-------------------------- Quinta -------------------------------------------------------------------

    function verificarDiferencaHorarioQuin(inicialMinqui, finalMinqui, descansoqui) {
        var totalMin = Number(finalMinqui - inicialMinqui - descansoqui);

        var carga_quinta = document.getElementById("qui_car");


        if(inicialMinqui && finalMinqui > 0) {
            carga_quinta.value = Math.trunc(totalMin / 60).toString();
        }
        if(carga_quinta.value > 10){
            alert("Carga horária excedeu o limite diário de 10h");
        }
    }


    function verificarHorarioQuin() {
        var inicial_quinta = document.getElementById("qui_ini").value;
        var final_quinta = document.getElementById("qui_fim").value;
        var descanso_quinta = document.getElementById("qui_des").value;

        /*var inicial_terca = document.getElementById("ter_ini").value;
        var final_terca = document.getElementById("ter_fim").value;
        var descanso_terca = document.getElementById("ter_des").value;

        var inicial_quarta = document.getElementById("qua_ini").value;
        var final_quarta = document.getElementById("qua_fim").value;
        var descanso_quarta = document.getElementById("qua_des").value;

        var inicial_quinta = document.getElementById("qui_ini").value;
        var final_quinta = document.getElementById("qui_fim").value;
        var descanso_quinta = document.getElementById("qui_des").value;

        var inicial_sexta = document.getElementById("sex_ini").value;
        var final_sexta = document.getElementById("sex_fim").value;
        var descanso_sexta = document.getElementById("sex_des").value;*/

        var splInicial = inicial_quinta.split(":"), splFinal = final_quinta.split(":");

        var inicialMinqui = (Number(splInicial[0] * 60)) + Number(splInicial[1]);
        var finalMinqui = (Number(splFinal[0] * 60)) + Number(splFinal[1]);

        var descansoqui = Number(descanso_quinta * 60);

        verificarDiferencaHorarioQuin(inicialMinqui, finalMinqui, descansoqui);


    }

    //-------------------------- sexta -------------------------------------------------------------------

    function verificarDiferencaHorarioSex(inicialMinsex, finalMinsex, descansosex) {
        var totalMin = Number(finalMinsex - inicialMinsex - descansosex);

        var carga_sexta = document.getElementById("sex_car");


        if(inicialMinsex && finalMinsex > 0) {
            carga_sexta.value = Math.trunc(totalMin / 60).toString();
        }

        if(carga_sexta.value > 10){
            alert("Carga horária excedeu o limite diário de 10h");
        }
    }


    function verificarHorarioSex() {
        var inicial_sexta = document.getElementById("sex_ini").value;
        var final_sexta = document.getElementById("sex_fim").value;
        var descanso_sexta = document.getElementById("sex_des").value;

        /*var inicial_terca = document.getElementById("ter_ini").value;
        var final_terca = document.getElementById("ter_fim").value;
        var descanso_terca = document.getElementById("ter_des").value;

        var inicial_quarta = document.getElementById("qua_ini").value;
        var final_quarta = document.getElementById("qua_fim").value;
        var descanso_quarta = document.getElementById("qua_des").value;

        var inicial_quinta = document.getElementById("qui_ini").value;
        var final_quinta = document.getElementById("qui_fim").value;
        var descanso_quinta = document.getElementById("qui_des").value;

        var inicial_sexta = document.getElementById("sex_ini").value;
        var final_sexta = document.getElementById("sex_fim").value;
        var descanso_sexta = document.getElementById("sex_des").value;*/

        var splInicial = inicial_sexta.split(":"), splFinal = final_sexta.split(":");

        var inicialMinsex = (Number(splInicial[0] * 60)) + Number(splInicial[1]);
        var finalMinsex = (Number(splFinal[0] * 60)) + Number(splFinal[1]);

        var descansosex = Number(descanso_sexta * 60);

        verificarDiferencaHorarioSex(inicialMinsex, finalMinsex, descansosex);


    }


    // function horaSemanal(){
        var hora_segunda = document.getElementById("seg_car").value;
        var hora_terca = document.getElementById("ter_car").value;
        var hora_quarta = document.getElementById("qua_car").value;
        var hora_quinta = document.getElementById("qui_car").value;
        var hora_sexta = document.getElementById("sex_car").value;

        var hora_semana = document.getElementById("total");

        var total_hora = hora_segunda + hora_terca + hora_quarta + hora_quinta + hora_sexta;

        hora_semana.value = total_hora;

        console.log(hora_semana.value);
        console.log(hora_segunda);
        console.log(hora_terca); 
        console.log(hora_quarta);
    //}

    //horaSemanal();

</script>